<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>清风度佳节，明月照廉途 - 清廉人生模拟器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 引入思源黑体和更正式的衬线字体 */
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Sans+SC:wght@400;700&family=Noto+Serif+SC:wght@700&display=swap');

        body {
            /* 使用更柔和的字体，优先使用 Noto Sans SC */
            font-family: 'Noto Sans SC', 'Inter', 'Ma Shan Zheng', sans-serif;
            background-color: #f0f7ff; /* 更柔和的蓝色背景 */
            background-image:
                radial-gradient(at 0% 0%, hsla(208, 100%, 97%, 1) 0px, transparent 50%),
                radial-gradient(at 98% 99%, hsla(210, 100%, 90%, 1) 0px, transparent 50%);
            color: #1e3a8a; /* 深蓝色文字，对比更清晰 */
        }

        .title-font {
            /* 标题字体，更换为更正式的衬线字体 */
            font-family: 'Noto Serif SC', serif;
        }

        .text-gradient {
            /* 标题渐变色 */
            background-image: linear-gradient(to right, #3b82f6, #1e3a8a);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .choice-button {
            /* 选项按钮统一样式 */
            transition: all 0.3s ease-in-out;
            will-change: transform, box-shadow;
        }

        .choice-button:hover:not(:disabled) {
            /* 按钮悬停效果 */
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.2), 0 4px 8px rgba(30, 58, 138, 0.1);
        }

        .choice-button:active:not(:disabled) {
            /* 按钮点击效果 */
            transform: translateY(-1px) scale(0.98);
        }
        
        .choice-button:disabled {
            cursor: not-allowed;
            background: #9ca3af;
            opacity: 0.7;
        }

        .restart-button {
            /* 重新开始按钮的特殊样式 */
            background: linear-gradient(135deg, #fb923c, #f97316);
        }
        .restart-button:hover:not(:disabled) {
            box-shadow: 0 10px 20px rgba(249, 115, 22, 0.25);
        }

        /* 优化表格样式 */
        table {
            border-spacing: 0;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        th {
            background-color: #3b82f6;
        }

        th, td {
            padding: 1rem 1.25rem;
        }

        tr:nth-child(even) {
            background-color: #eff6ff; /* 淡蓝色斑马条纹 */
        }
        
        tr:hover {
            background-color: #dbeafe; /* 悬停时高亮行 */
        }

        @media (max-width: 640px) { /* sm breakpoint */
            .responsive-table th, .responsive-table td {
                padding: 0.5rem;
                font-size: 0.875rem;
            }
        }

    </style>
</head>
<body class="min-h-screen flex items-start sm:items-center justify-center p-4">

    <!-- 主游戏容器，增加响应式设计 -->
    <div class="game-container w-full max-w-4xl mx-auto p-4 md:p-8 bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50">
        
        <header class="text-center mb-4 md:mb-6">
            <!-- 游戏标题与副标题 -->
            <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-3 title-font text-gradient">清风度佳节，明月照廉途</h1>
            <h2 id="position-title" class="text-base sm:text-lg md:text-xl font-semibold text-blue-700 transition-opacity duration-500">清廉人生模拟器</h2>
             <!-- 清廉指数 -->
            <div class="mt-2 text-blue-800"><span class="font-semibold">清廉指数:</span> <span id="score" class="font-bold text-xl sm:text-2xl text-green-500 transition-colors duration-500">100</span></div>
        </header>
        
        <main>
            <!-- 游戏显示区域 -->
            <div id="game-display" class="relative w-full aspect-square sm:aspect-video bg-cover bg-center rounded-2xl shadow-lg border-2 border-white overflow-hidden transition-all duration-500">
                <!-- 对话框 -->
                <div id="dialogue-box" class="absolute bottom-4 left-4 right-4 md:left-1/2 md:-translate-x-1/2 md:w-3/4 bg-white/80 backdrop-blur-md p-3 sm:p-4 rounded-xl shadow-md border border-gray-200/50 transition-opacity duration-300 opacity-0 pointer-events-none">
                    <p id="dialogue-text" class="text-gray-800 text-sm sm:text-base text-center font-medium"></p>
                </div>
            </div>

            <!-- 故事描述 -->
            <div id="story-text" class="w-full mt-6 bg-blue-50/70 border border-blue-200/50 p-4 rounded-2xl shadow-inner min-h-[80px] text-sm sm:text-base">
                <p class="text-blue-900 leading-relaxed"></p>
            </div>

            <!-- 选项区域 -->
            <div id="choices-container" class="w-full mt-6 grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 md:gap-6">
                <!-- 选项按钮将由 JavaScript 注入 -->
            </div>
        </main>
    </div>

    <!-- 游戏逻辑 -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameDisplay = document.getElementById('game-display');
            const storyTextDiv = document.getElementById('story-text').querySelector('p');
            const choicesContainer = document.getElementById('choices-container');
            const dialogueBox = document.getElementById('dialogue-box');
            const dialogueText = document.getElementById('dialogue-text');
            const positionTitle = document.getElementById('position-title');
            const scoreEl = document.getElementById('score');

            let integrityScore = 100;
            let countdownInterval; // 用于存储倒计时计时器

            const scenes = {
                "intro": {
                    title: "引言",
                    background: "poster.png",
                    story: "欢迎来到《清风度佳节，明月照廉途》。你将扮演几位角色不同的国有企业党员员工，在多个岗位上，面对职业与人生的种种选择。每一次选择都将塑造你的未来，每一次诱惑都可能成为你人生路上的陷阱。这个中秋，你将如何选择？你的人生轨迹，由你亲手书写。",
                    choices: [{ text: "开始你的职业生涯", nextScene: "act1" }]
                },
                "act1": {
                    title: "第一幕：中秋月饼背后的“人情”考验",
                    position: "品牌运营部基层员工",
                    background: "scene1.1.png",
                    story: "你大学毕业后通过公开招聘，成为某国有企业的一名新员工，从事产品设计工作。中秋将至，部门工作异常繁忙。与公司长期合作的某包装公司项目经理王总来访，他递给你一个精致的礼盒，里面是价值不菲的月饼礼券，并微笑着说：“这段时间辛苦了，这是我们公司的一点心意，不成敬意，大家一起尝尝。”",
                    dialogue: "“这段时间辛苦了，这是我们公司的一点心意，不成敬意，大家一起尝尝。”",
                    choices: [
                        { text: "婉言谢绝，并告知王总公司有明确规定，不能收受任何形式的礼品。", nextScene: "act2", isCorrect: true },
                        { text: "犹豫再三，还是收下礼券，心想“只是一些月饼券而已，算不上什么大问题。”", nextScene: "act1_end2" },
                        { text: "收下礼券，心存侥幸，认为不会被发现。", nextScene: "act1_end3" },
                        { text: "坚决拒收，并当场严厉批评王总，其行为可能给双方带来风险。", nextScene: "act1_end4" }
                    ]
                },
                "act1_end2": {
                    title: "第一幕：错误结局",
                    penalty: 15,
                    background: "scene1.2.png",
                    story: "<strong>处理结果：</strong><br>你因收受管理和服务对象赠送的月饼礼券，违反中央八项规定精神，受到党内警告处分。千里之堤毁于蚁穴，收受可能影响公正执行公务的财物，不论价值大小，都是对纪律的漠视。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第九十七条规定：“收受可能影响公正执行公务的礼品、礼金、消费卡（券）和有价证券、股权、其他金融产品等财物，情节较轻的，给予警告或者严重警告处分；情节较重的，给予撤销党内职务或者留党察看处分；情节严重的，给予开除党籍处分。",
                    choices: [{ text: "返回重选", nextScene: "act1" }]
                },
                "act1_end3": {
                    title: "第一幕：错误结局",
                    penalty: 10,
                    background: "scene1.2.png",
                    story: "<strong>处理结果：</strong><br>你心存侥幸收下礼券，自认为神不知鬼不觉，能瞒天过海，实际上组织在日常监督中已发现并掌握你的情况。最后，你因收受管理和服务对象赠送的月饼礼券，违反中央八项规定精神，受到党内警告处分。”<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第九十七条规定“收受可能影响公正执行公务的礼品、礼金、消费卡（券）和有价证券、股权、其他金融产品等财物，情节较轻的，给予警告或者严重警告处分；情节较重的，给予撤销党内职务或者留党察看处分；情节严重的，给予开除党籍处分。",
                    choices: [{ text: "返回重选", nextScene: "act1" }]
                },
                "act1_end4": {
                    title: "第一幕：错误结局",
                    penalty: 5,
                    background: "scene1.3.png",
                    story: "<strong>处理结果：</strong><br>你坚决拒收并当场严厉批评王总，态度过于生硬。虽然你的行为符合纪律要求，但由于方式不当，造成了与合作方的关系紧张。<br><br><strong>相关法律法规与条例：</strong><br>",
                    choices: [{ text: "返回重选", nextScene: "act1" }]
                },
                "act2": {
                    title: "第二幕：公车公款的“便利”陷阱",
                    position: "物业部项目经理",
                    background: "scene2.jpg",
                    story: "你因工作表现出色，被提拔为物业运营部项目经理，负责一个重点项目。中秋假期结束后，一个工程勘察任务需要你每天往返郊区，但公司公车派用紧张。项目合作方某建筑公司的张总得知情况后，主动提出把他的豪华商务车借给你使用。他表示：“这比打车方便多了，油费直接走我的公司账，省得你报销麻烦。”",
                    dialogue: "“这比打车方便多了，油费直接走我的公司账，省得你报销麻烦。”",
                    choices: [
                        { text: "坚持不接受，并告知对方公司有严格规定不得借用管理和服务对象提供的车辆。", nextScene: "act3", isCorrect: true },
                        { text: "接受张总的好意，心想“这只是个顺风车，省去了公司的麻烦，又没收钱。”", nextScene: "act2_end2" },
                        { text: "接受张总的安排，但坚持自己支付油费，以示清白。", nextScene: "act2_end3" },
                        { text: "接受张总的安排，并以“业务接待费”名义，将相关费用报销在公司账上。", nextScene: "act2_end4" }
                    ]
                },
                "act2_end2": {
                    title: "第二幕：错误结局",
                    penalty: 20,
                    background: "admin2.3.png",
                    story: "<strong>处理结果：</strong><br>这种行为并非简单的“搭顺风车”，而是一种可能影响公正执行公务的利益输送行为，已违反廉洁纪律，你也因上述问题受到了党内警告处分。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第九十九条“借用管理和服务对象的钱款、住房、车辆等，可能影响公正执行公务，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务、留党察看或者开除党籍处分。”",
                    choices: [{ text: "返回重选", nextScene: "act2" }]
                },
                "act2_end3": {
                    title: "第二幕：错误结局",
                    penalty: 15,
                    background: "admin2.3.png",
                    story: "<strong>处理结果：</strong><br>虽然你支付了油费，但无法改变已借用管理和服务对象车辆的客观实际，这种行为已然违反了廉洁纪律。鉴于该你可能存在认识偏差，能够主动支付车辆油费，公司决定对你诫勉处理。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第十九条第二款“党员有作风纪律方面的苗头性、倾向性问题或者违犯党纪情节轻微的，可以给予谈话提醒、批评教育、责令检查等，或者予以诫勉，不予党纪处分。”；第九十九条“借用管理和服务对象的钱款、住房、车辆等，可能影响公正执行公务，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务、留党察看或者开除党籍处分。”",
                    choices: [{ text: "返回重选", nextScene: "act2" }]
                },
                "act2_end4": {
                    title: "第二幕：错误结局",
                    penalty: 30,
                    background: "scene2.1.png",
                    story: "<strong>处理结果：</strong><br>你借用管理和服务对象车辆，并将费用以“业务接待费”名义报销在公司账上，性质极其恶劣，是典型的“靠企吃企”的行为。对此，组织决定给与你党内严重警告处分。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第九十九条“借用管理和服务对象的钱款、住房、车辆等，可能影响公正执行公务，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务、留党察看或者开除党籍处分。”；第一百一十一条第二款“用职权或者职务上的影响，将应当由本人、配偶、子女及其配偶等亲属、身边工作人员和其他特定关系人个人支付的费用，由下属单位、其他单位或者他人支付、报销的，依照前款规定处理。”",
                    choices: [{ text: "返回重选", nextScene: "act2" }]
                },
                "act3": {
                    title: "第三幕：节假日值班中的“松懈”考验",
                    position: "物业部项目经理",
                    background: "scene3.png",
                    story: "中秋节假期，你作为部门骨干，被安排在公司物业运营中心进行节日值班，负责处理公司物业特别是老旧小区物业的突发情况。此时，你的大学同学和朋友们组织了一场去郊区露营的自驾游，临时邀请你加入。他们劝你：“就在郊区而已，有事打电话就能回来了，平时都这么辛苦，难得放松一下，没人会发现。”你心中犹豫，一面是难得的放松机会，一面是肩上的责任。",
                    dialogue: "“就在郊区而已，有事打电话就能回来了，平时都这么辛苦，难得放松一下，没人会发现。”",
                    choices: [
                        { text: "坚守岗位，将露营计划推迟，并向朋友们说明自己的情况。", nextScene: "act4", isCorrect: true },
                        { text: "赴约参加露营，认为即使有突发情况，也可以通过电话远程指挥，不影响大局。", nextScene: "act3_end2" },
                        { text: "赴约参加露营，但为了不被发现，关闭手机，心想“放假期间不可能有什么大事。”", nextScene: "act3_end3" },
                        { text: "赴约参加露营，同时向领导谎称你已在值班岗位，并请同事帮忙打掩护。", nextScene: "act3_end4" }
                    ]
                },
                "act3_end2": {
                    title: "第三幕：错误结局",
                    penalty: 20,
                    background: "scene3.1.png",
                    story: "<strong>处理结果：</strong><br>你赴约参加露营，在得知有突发情况后，你远程电话指挥下属处置，但由于无法亲临现场，未能及时准确判断事故原因，导致小小的电力故障引发安全设备连锁故障，进而造成严重的国有资产损失。你因不正确履行职责、贻误工作，受到党内严重警告、政务降级处分。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第一百三十条第一款“工作中不负责任或者疏于管理，贯彻执行、检查督促落实上级决策部署不力，给党、国家和人民利益以及公共财产造成较大损失的，对直接责任者和领导责任者，给予警告或者严重警告处分；造成重大损失的，给予撤销党内职务、留党察看或者开除党籍处分。”《中华人民共和国公职人员政务处分法》第三十九条“有下列行为之一，造成不良后果或者影响的，予以警告、记过或者记大过；情节较重的，予以降级或者撤职；情节严重的，予以开除：...（二）不履行或者不正确履行职责，玩忽职守，贻误工作的；...”",
                    choices: [{ text: "返回重选", nextScene: "act3" }]
                },
                "act3_end3": {
                    title: "第三幕：错误结局",
                    penalty: 30,
                    background: "scene3.2.png",
                    story: "<strong>处理结果：</strong><br>你关闭手机，擅自脱岗，导致某物业的突发事故无人知晓。当公司发现问题并紧急联系你时，你才匆忙返回。由于延误了最佳处理时机，事故造成了更为严重的损失，并引发了公众对国企物业安全管理的质疑。你因擅自脱岗、玩忽职守，受到开除党籍、解除劳动合同的处分。<br><br><strong>相关法律法规与条例：</strong><br> 《中国共产党纪律处分条例》第一百三十条第一款“工作中不负责任或者疏于管理，贯彻执行、检查督促落实上级决策部署不力，给党、国家和人民利益以及公共财产造成较大损失的，对直接责任者和领导责任者，给予警告或者严重警告处分；造成重大损失的，给予撤销党内职务、留党察看或者开除党籍处分。”《中华人民共和国公职人员政务处分法》第三十九条“有下列行为之一，造成不良后果或者影响的，予以警告、记过或者记大过；情节较重的，予以降级或者撤职；情节严重的，予以开除：...（二）不履行或者不正确履行职责，玩忽职守，贻误工作的；...”",
                    choices: [{ text: "返回重选", nextScene: "act3" }]
                },
                "act3_end4": {
                    title: "第三幕：错误结局",
                    penalty: 15,
                    background: "scene3.3.png",
                    story: "<strong>处理结果：</strong><br>你在赴约露营的同时，向领导谎称你已在岗，并请同事帮忙打掩护。事后，公司在进行内部自查时发现了你的欺骗行为。你因违反工作纪律、公司有关规定，被给予诫勉谈话，并取消年度评优资格、扣除当月及一定期限的绩效工资和奖金。帮忙打掩护的同事也收到相应处理<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第一百四十九条“在党的纪律检查、组织、宣传、统一战线工作以及机关工作等其他工作中，不履行或者不正确履行职责，造成损失或者不良影响的，应当视具体情节给予警告直至开除党籍处分。”以及公司内部管理制度等",
                    choices: [{ text: "返回重选", nextScene: "act3" }]
                },
                "act4": {
                    title: "第四幕：私人会所里的“雅贿”陷阱",
                    position: "资产管理部副经理",
                    background: "scene4.png",
                    story: "你在公司已是中层干部，负责一个重要的闲置资产盘活项目。为庆祝项目合作顺利，一个长期合作的私营企业主刘总约你中秋节前小聚。他邀请你到一家号称“私人艺术俱乐部”的会所，并表示：“这里不对外开放，都是圈子里的朋友，可以放松地聊聊天。会所里有高尔夫模拟器，有顶级音响，还有私厨定制餐，费用都是我来处理，和公司业务没关系，你只管来放松。”",
                    dialogue: "“这里不对外开放，都是圈子里的朋友...你只管来放松。”",
                    choices: [
                        { text: "坚决拒绝，明确告知刘总作为国企干部，不得违规出入私人会所或接受高消费娱乐活动安排。", nextScene: "act5", isCorrect: true },
                        { text: "接受邀请，心想“这不是公款消费，而且是私人场所，不会有事。”", nextScene: "act4_end2" },
                        { text: "接受邀请，但坚持自己支付相关费用，以示清白。", nextScene: "act4_end3" },
                        { text: "接受邀请，但只参与喝茶聊天，不参与高尔夫等高消费娱乐活动。", nextScene: "act4_end4" }
                    ]
                },
                "act4_end2": {
                    title: "第四幕：错误结局",
                    penalty: 25,
                    background: "scene4.2.png",
                    story: "<strong>处理结果：</strong><br>你接受了刘总的邀请，参加了私人会所的聚会。虽然你认为这是私人行为，但组织在进行核查时，发现了你违规出入私人会所的问题。你因接受可能影响公正执行公务的高消费娱乐活动，受到党内警告处分。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第一百零二条“违反有关规定取得、持有、实际使用运动健身卡、会所和俱乐部会员卡、高尔夫球卡等各种消费卡（券），或者违反有关规定出入私人会所，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务或者留党察看处分。”同时，根据《国有企业领导人员廉洁从业若干规定》，国有企业领导人员不得用公款支付与公务无关的娱乐活动费用。",
                    choices: [{ text: "返回重选", nextScene: "act4" }]
                },
                "act4_end3": {
                    title: "第四幕：错误结局",
                    penalty: 20,
                    background: "scene4.2.png",
                    story: "<strong>处理结果：</strong><br>你在私人会所坚持自己买单，但调查发现，你接受了刘总为你提供的场地、服务和人员，这本身就是是一种变相的接受服务。你因违规出入私人会所，接受可能影响公正执行公务的服务，被给予党内警告处分。你的“自作聪明”最终并没有让你逃脱纪律的惩罚。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第一百零二条“违反有关规定取得、持有、实际使用运动健身卡、会所和俱乐部会员卡、高尔夫球卡等各种消费卡（券），或者违反有关规定出入私人会所，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务或者留党察看处分。”",
                    choices: [{ text: "返回重选", nextScene: "act4" }]
                },
                "act4_end4": {
                    title: "第四幕：错误结局",
                    penalty: 15,
                    background: "scene4.1.png",
                    story: "<strong>处理结果：</strong><br>你只参与了喝茶聊天，没有参与高尔夫等娱乐活动。但公司发现，你接受了刘总提供的免费餐食和会所服务，且明知该会所为私人性质，仍选择进入。你因违规出入私人会所，被给予党内警告处分。你以为的“只聊天”，并没有让你免于违纪的责任。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第一百零二条“违反有关规定取得、持有、实际使用运动健身卡、会所和俱乐部会员卡、高尔夫球卡等各种消费卡（券），或者违反有关规定出入私人会所，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务或者留党察看处分。”",
                    choices: [{ text: "返回重选", nextScene: "act4" }]
                },
                "act5": {
                    title: "第五幕：资产管理中的“利益”博弈",
                    position: "资产管理部负责人",
                    background: "scene5.png",
                    story: "你作为公司中层骨干，正负责一个颇具市场前景的闲置资产盘活项目。项目推进顺利，长期合作方、私营企业家刘总对你的专业能力和高效沟通赞赏有加。中秋节前，刘总以感谢为名，特地邀请你到这家他常来的餐厅“坐坐，聊聊天”。几杯茶后，氛围逐渐放松。刘总状似无意地聊起家庭理财，得知你家人正好有一笔闲置资金后，他身体微微前倾，压低声音，神秘地向你推荐：“张总，说句心里话，这次项目合作这么顺，全靠你大力支持。我这边正好有一个私募股权项目，投向是未上市的科创企业，前景非常好，年化收益预计能到15%。门槛有点高，但跟你是自己人，我特地给你匀了个额度。你家人那笔钱正好可以用上，算是我个人对你的一点心意和感谢。你放心，这完全是朋友间的帮忙，商业投资，合法合规，跟咱们的公事一码归一码，不会给你添任何麻烦。",
                    dialogue: "“你放心，这完全是朋友间的帮忙，商业投资，合法合规...不会给你添任何麻烦”",
                    choices: [
                        { text: "刘总，非常感谢您的好意，但这个绝对不行。这顿饭我来请，就当是朋友聚餐", nextScene: "act6", isCorrect: true },
                        { text: "心存侥幸，让家人投资。 你有些心动，觉得刘总说得有道理，只要不动用公司资源，应该不算违规。于是默许并让家人以其个人名义与刘总方面对接并投入资金。”", nextScene: "act5_end2" },
                        { text: "婉言谢绝，但“暗示”机会。 你嘴上说着“这不合适，我身份敏感”，但又补充道：“不过我有个远房亲戚，做点小生意，或许会对这种高回报项目感兴趣。我让他改天直接联系你吧。”", nextScene: "act5_end3" },
                        { text: "拒绝投资，但泄露“内幕”。 你拒绝了刘总的“好意”，但为了“还人情”，在后续闲聊中有意无意地向他透露了你部门正在研究的、尚未公开的对某新兴行业的投资策略和潜在标的，并暗示这些信息对他的私募项目有巨大价值。", nextScene: "act5_end4" }
                    ]
                },
                "act5_end2": {
                    title: "第五幕：错误结局",
                    penalty: 30,
                    background: "scene5.1.png",
                    story: "<strong>处理结果：</strong><br>你接受了刘总的提议，由你的配偶出面，将家庭资金投入到该私募项目中。起初项目回报丰厚，让你暗自庆幸。然而，在一次巡察中，巡察组发现了这一情况，经查证，认定你利用职务上的影响，为家人等特定关系人谋取利益。尽管你辩称这是“正常的商业投资”，但调查组明确指出，刘总之所以提供这个“高收益、稳赚不赔”的机会，其根本目的是为了与你维持并深化“关系”，以期在未来的业务合作中获得你的关照和便利。这种行为本质上是“期权式”的利益输送。最终，你因此行为受到撤销党内职务、政务撤职的处分，并被调离重要岗位。家庭的“投资收益”也被作为违纪所得予以收缴。你的职业生涯遭受重创，家庭也因此蒙上阴影。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第九十四条第二款“利用职权或者职务上的影响为他人谋取利益，本人的配偶、子女及其配偶等亲属和其他特定关系人收受对方财物，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务、留党察看或者开除党籍处分。”",
                    choices: [{ text: "返回重选", nextScene: "act5" }]
                },
                "act5_end3": {
                    title: "第五幕：错误结局",
                    penalty: 25,
                    background: "scene5.1.png",
                    story: "<strong>处理结果：</strong><br>你自以为聪明地“婉拒”了刘总，并暗示他可以与你的亲戚直接联系。你的亲戚在你作为“中间人”的影响下，顺利与刘总达成了投资合作。事后，该亲戚为了“感谢”，逢年过节对你多有“表示”。后续，调查人员发现了你亲戚的这笔“特殊”投资。尽管你并未直接参与，但调查认定，没有你的职务身份和影响力作为背书，你的亲戚不可能获得这个投资机会。你实质上构成了利用职务影响力为特定关系人提供帮助，属于典型的“影子公司”、“影子股东”问题。最终，你因此受到党内严重警告处分，提拔任用也因此受到直接影响。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第九十四条第二款“利用职权或者职务上的影响为他人谋取利益，本人的配偶、子女及其配偶等亲属和其他特定关系人收受对方财物，情节较重的，给予警告或者严重警告处分；情节严重的，给予撤销党内职务、留党察看或者开除党籍处分。”",
                    choices: [{ text: "返回重选", nextScene: "act5" }]
                },
                "act5_end4": {
                    title: "第五幕：错误结局",
                    penalty: 40,
                    background: "scene5.1.png",
                    story: "<strong>处理结果：</strong><br>你向刘总泄露的关于公司未来投资方向的内幕信息，被他用在了自己的私募项目中，并提前布局，获得了巨额利润。然而，专项审计发现有外部资本精准“狙击”了公司的投资标的，行动轨迹高度可疑。有关机关随即介入，通过技术手段和调查，最终锁定了你。经查，你泄露的信息被依法认定为关系到国有资产布局的商业秘密。你的行为不仅违反了党的纪律，更触犯了国家法律。最终，你因故意泄露国家秘密罪和为亲友非法牟利罪，被开除党籍、开除公职，并被依法判处有期徒刑。刘总也因涉嫌非法获取、使用内幕信息而受到法律的严惩。一个看似不经意的“人情”，让你付出了自由的代价。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第三十四条、第九十五条、第一百三十条。《中华人民共和国刑法》第一百六十六条【为亲友非法牟利罪】、《中华人民共和国刑法》第二百一十九条【侵犯商业秘密罪】相关规定。",
                    choices: [{ text: "返回重选", nextScene: "act5" }]
                },
                "act6": {
                    title: "第六幕：违规决策与利益输送",
                    position: "公司某项目负责人",
                    background: "scene6.png",
                    story: "你已是公司某项目负责人。为尽快出“成绩”，你力推一个高风险但收益巨大的新项目。该项目由公司长期合作的私营企业主刘总负责。中秋节前夕，刘总约你到一家私人会所小聚。席间，他直言不讳地提出，只要你能尽快推动项目审批，他会以“顾问费”的名义，将一笔丰厚的“特别奖金”打到你指定的个人账户上。他笑着说：“这是我们之间的私事，和公司业务无关，更不涉及公款。”",
                    dialogue: "“这是我们之间的私事，和公司业务无关，更不涉及公款。”",
                    choices: [
                        { text: "坚决拒绝，并明确告知对方这属于商业贿赂，是纪律的红线。", nextScene: "win_end", isCorrect: true },
                        { text: "心存侥幸，接受刘总的“顾问费”，心想只要不涉及公司账目就不会被发现。", nextScene: "act6_end2" },
                        { text: "婉言谢绝，但暗示刘总自己可以为其提供审批方面的便利，以规避风险。", nextScene: "act6_end3" },
                        { text: "同意接受“顾问费”，并承诺会利用职务便利，加快项目流程。", nextScene: "act6_end4" }
                    ]
                },
                "act6_end2": {
                    title: "第六幕：错误结局",
                    penalty: 40,
                    background: "scene6.1.png",
                    story: "<strong>处理结果：</strong><br>你收受了刘总的“顾问费”。该项目在后续审计中被发现存在重大问题，纪委在深入调查中查清了你与刘总之间的利益输送。你因利用职务便利收受贿赂，被开除党籍、开除公职，并被移送司法机关。你以为的“隐秘”交易，最终成为你腐败的铁证。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第二十八条“对违法犯罪的党员，应当按照规定给予党纪处分，做到适用纪律和适用法律有机融合，党纪政务等处分相匹配。”《中华人民共和国刑法》第三百八十五条【受贿罪】、第一百六十八条【国有公司、企业、事业单位人员失职罪；国有公司、企业、事业单位人员滥用职权罪】相关规定。",
                    choices: [{ text: "返回重选", nextScene: "act6" }]
                },
                "act6_end3": {
                    title: "第六幕：错误结局",
                    penalty: 30,
                    background: "scene2.1.png",
                    story: "<strong>处理结果：</strong><br>你婉拒了金钱，但暗示刘总可以为你提供审批方面的便利。在调查中，发现情节严重，你被认定为利用职务便利为他人谋取不正当利益、情节严重。你被给予撤销党内职务、政务撤职处理，人生轨迹被彻底改变。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第一百零四条第一款“利用职权或者职务上的影响，为配偶、子女及其配偶等亲属和其他特定关系人在审批监管、资源开发、金融信贷、大宗采购、土地使用权出让、房地产开发、工程招投标以及公共财政收支等方面谋取利益，情节较轻的，给予警告或者严重警告处分；情节较重的，给予撤销党内职务或者留党察看处分；情节严重的，给予开除党籍处分。”",
                    choices: [{ text: "返回重选", nextScene: "act6" }]
                },
                "act6_end4": {
                    title: "第六幕：错误结局",
                    penalty: 50,
                    background: "scene6.1.png",
                    story: "<strong>处理结果：</strong><br>你收受贿赂后，利用职权，强行要求下属简化流程、通过项目审批。项目上线后不久，因前期风险评估不足，市场环境突变，最终爆雷，给企业造成了数以亿计的国有资产巨额损失。公司在调查中发现了你与刘总的权钱交易，以及你滥用职权的行为。你最终被开除党籍、开除公职，并被判处有期徒刑。你曾以为的“成绩”，最终成为你犯罪的铁证。<br><br><strong>相关法律法规与条例：</strong><br>《中国共产党纪律处分条例》第二十八条“对违法犯罪的党员，应当按照规定给予党纪处分，做到适用纪律和适用法律有机融合，党纪政务等处分相匹配。”《中华人民共和国刑法》第三百八十五条【受贿罪】、第一百六十八条【国有公司、企业、事业单位人员失职罪；国有公司、企业、事业单位人员滥用职权罪】相关规定。",
                    choices: [{ text: "返回重选", nextScene: "act6" }]
                },
                "win_end": {
                    title: "大结局：清风度佳节，明月照廉途",
                    background: "end.png",
                    story: `你坚守底线，拒绝了每一次诱惑。你的职业生涯虽然没有捷径，但每一步都走得踏实、稳健。因为清廉，你赢得了同事和领导的尊重，更收获了内心的安宁。你最终成为了公司的楷模，在退休时，收获了一份值得铭记的荣誉和一份安稳的晚年生活。<br><br><p class='text-center text-xl font-bold'>最终清廉指数: <span class='text-green-500'>100</span></p>皎皎明月照心田，中秋佳节共颂廉。银辉遍洒人间路，清风徐来扬正篇。`,
                    choices: [{ text: "查看对照表", nextScene: "law_table" }]
                },
                "law_table": {
                    title: "违纪违法行为与纪法条文对照表",
                    background: "law.png",
                    story: `
                        <p class="text-xl font-bold text-center mb-6 text-blue-800">“知其然，更知其所以然”</p>
                        <div class="overflow-x-auto">
                            <table class="responsive-table w-full text-sm text-left text-gray-700">
                                <thead class="text-xs text-white uppercase">
                                    <tr>
                                        <th class="whitespace-nowrap">行为描述</th>
                                        <th class="whitespace-nowrap">对应条款</th>
                                        <th class="whitespace-nowrap">核心要点解读</th>
                                        <th class="whitespace-nowrap">本剧本中情节</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-blue-200">
                                        <td>收受月饼礼券</td>
                                        <td>《中国共产党纪律处分条例》第九十七条，《国有企业领导人员廉洁从业若干规定》第四条</td>
                                        <td>收受可能影响公正执行公务的财物，属于违反廉洁纪律和廉洁从业规定。</td>
                                        <td>第一幕</td>
                                    </tr>
                                    <tr class="border-b border-blue-200">
                                        <td>借用管理和服务对象的钱款、住房、车辆等，可能影响公正执行公务</td>
                                        <td>《中国共产党纪律处分条例》第九十九条，第一百一十一条第二款</td>
                                        <td>党员领导干部利用职务影响，打着“借用”的旗号，违规借用、占用下属单位或者企业、管理服务对象的钱款、住房、车辆等，实质上是公权力的异化，侵害了党员领导干部的职务廉洁性，导致权利滥用，甚至引发权钱交易。</td>
                                        <td>第二幕</td>
                                    </tr>
                                    <tr class="border-b border-blue-200">
                                        <td>擅自脱岗、玩忽职守</td>
                                        <td>《中国共产党纪律处分条例》第一百三十条，《中华人民共和国公职人员政务处分法》第三十九条</td>
                                        <td>不正确履行职责，玩忽职守，贻误工作。</td>
                                        <td>第三幕</td>
                                    </tr>
                                    <tr class="border-b border-blue-200">
                                        <td>违规出入私人会所</td>
                                        <td>《中国共产党纪律处分条例》第九十七条，第一百零二条，《国有企业领导人员廉洁从业若干规定》</td>
                                        <td>接受可能影响公正执行公务的健身娱乐等活动，属于违反中央八项规定精神和廉洁从业规定。</td>
                                        <td>第四幕</td>
                                    </tr>
                                    <tr class="border-b border-blue-200">
                                        <td>利用职权或者职务上的影响，为本人、配偶、子女及其配偶等亲属和其他特定关系人谋取利益</td>
                                        <td>《中国共产党纪律处分条例》第三十四条、第九十四条、第九十五条，《国有企业领导人员廉洁从业若干规定》第五条，《中华人民共和国刑法》第一百六十六条，第二百一十九条</td>
                                        <td>利用职权或职务影响，为个人、亲属等特定关系人谋取不正当利益，属于违反廉洁纪律和廉洁从业规定。情节严重涉嫌犯侵犯商业秘密罪，为亲友非法牟利罪</td>
                                        <td>第五幕</td>
                                    </tr>
                                    <tr>
                                        <td>违规决策与利益输送</td>
                                        <td>《中国共产党纪律处分条例》第二十八条、第七十七条、第一百零四条，《刑法》第三百八十五条、第一百六十八条</td>
                                        <td>利用职权或职务影响，为他人谋取不正当利益，造成国有资产损失。</td>
                                        <td>第六幕</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    `,
                    choices: [{ text: "重新开始", nextScene: "intro" }]
                }
            };

            let currentSceneKey = "intro";

            function shuffleChoices(choices) {
                for (let i = choices.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [choices[i], choices[j]] = [choices[j], choices[i]];
                }
                return choices;
            }

            // 更新分数显示和颜色
            function updateScoreDisplay() {
                scoreEl.textContent = integrityScore;
                scoreEl.classList.remove('text-green-500', 'text-yellow-500', 'text-red-500');
                if (integrityScore > 70) {
                    scoreEl.classList.add('text-green-500');
                } else if (integrityScore > 40) {
                    scoreEl.classList.add('text-yellow-500');
                } else {
                    scoreEl.classList.add('text-red-500');
                }
            }

            // 处理玩家选择
            function handleChoice(choice) {
                const targetScene = scenes[choice.nextScene];
                
                // 如果是错误选项，则扣分
                if (targetScene && targetScene.penalty) {
                    integrityScore -= targetScene.penalty;
                    if (integrityScore < 0) integrityScore = 0;
                }

                // 如果是回到介绍页，则重置分数
                if (choice.nextScene === 'intro') {
                    integrityScore = 100;
                }
                
                updateScoreDisplay();

                currentSceneKey = choice.nextScene;
                window.scrollTo({ top: 0, behavior: 'smooth' });
                renderScene();
            }

            function renderScene() {
                clearInterval(countdownInterval); // 清除上一个场景可能存在的倒计时
                const scene = scenes[currentSceneKey];
                
                document.title = scene.title + " - 清风度佳节，明月照廉途";
                
                if (scene.position) {
                    positionTitle.textContent = `职位: ${scene.position}`;
                    positionTitle.style.opacity = '1';
                } else if (currentSceneKey === 'intro') {
                    positionTitle.textContent = "国企清廉人生模拟器";
                    positionTitle.style.opacity = '1';
                } else {
                     positionTitle.style.opacity = '0';
                }
                
                gameDisplay.style.backgroundImage = `url('${scene.background}')`;
                
                // 完美结局时显示最终分数
                if (currentSceneKey === 'win_end') {
                    storyTextDiv.innerHTML = scene.story.replace("100", integrityScore);
                } else {
                    storyTextDiv.innerHTML = scene.story;
                }
                
                if (scene.dialogue) {
                    dialogueBox.classList.remove('opacity-0', 'pointer-events-none');
                    dialogueText.textContent = scene.dialogue;
                } else {
                    dialogueBox.classList.add('opacity-0', 'pointer-events-none');
                }

                choicesContainer.innerHTML = '';
                
                let choicesToRender = [...scene.choices];
                const isErrorScene = currentSceneKey.includes("_end");

                if (!isErrorScene && currentSceneKey !== 'intro' && currentSceneKey !== 'win_end' && currentSceneKey !== 'law_table') {
                    choicesToRender = shuffleChoices(choicesToRender);
                }
                
                choicesToRender.forEach(choice => {
                    const button = document.createElement('button');
                    
                    const isSingleChoice = choicesToRender.length === 1;
                    const textAlignClass = isSingleChoice ? 'text-center' : 'text-left';
                    const isRestartButton = choice.text === '返回重选' || choice.text === '重新开始';
                    const buttonColorClass = isRestartButton ? 'restart-button' : 'bg-gradient-to-r from-blue-500 to-blue-600';
                    
                    button.className = `choice-button w-full p-3 sm:p-4 ${textAlignClass} rounded-xl shadow-md text-white font-semibold text-sm sm:text-base ${buttonColorClass}`;
                    
                    if (isSingleChoice) {
                        choicesContainer.classList.remove('md:grid-cols-2');
                        choicesContainer.classList.add('max-w-md', 'mx-auto');
                    } else {
                        choicesContainer.classList.add('md:grid-cols-2');
                        choicesContainer.classList.remove('max-w-md', 'mx-auto');
                    }

                    // 核心逻辑：处理点击和倒计时
                    if (isErrorScene) {
                        let countdown = 5;
                        button.innerHTML = `我已了解后果 (${countdown})`;
                        button.disabled = true;

                        countdownInterval = setInterval(() => {
                            countdown--;
                            button.innerHTML = `我已了解后果 (${countdown})`;
                            if (countdown <= 0) {
                                clearInterval(countdownInterval);
                                button.innerHTML = choice.text;
                                button.disabled = false;
                                button.onclick = () => handleChoice(choice);
                            }
                        }, 1000);
                    } else {
                         button.innerHTML = choice.text;
                         button.onclick = () => handleChoice(choice);
                    }

                    choicesContainer.appendChild(button);
                });
            }
            
            updateScoreDisplay();
            renderScene();
        });
    </script>
</body>
</html>





